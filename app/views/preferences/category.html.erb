<!DOCTYPE html>
<html>
<head>
  <title> <%= params[:category] %></title>
</head>
<body>
  <div class="m-3">
    <h1> Select from all <%= @category.capitalize.gsub("_"," ") %></h1>
    <% if params[:category] == "cuisines"  %>
      <% i = '-danger' %>
    <% elsif params[:category] == "top_choices" %>
      <% i = '-secondary'  %>
    <% elsif params[:category] == "dish_types"%>
      <% i = '-info'  %>
    <% else%>
      <% i = '-warning' %>
    <% end %>

    <div class="row p-1">
        <% @tags.each do |tag| %>
       <%next if Preference.exists?(tag_id: tag.id, user_id: current_user.id, kind: -1, active: true) || tag.name == 'sustainable' || tag.name == 'cheap' || tag.name == 'veryPopular'%>

        <div class="col-6 col-lg-2 col-md-3 col-sm-4 p-1">

          <% if Preference.exists?(tag_id: tag.id, user_id: current_user.id, kind: 1, active: true) %>
            <% pref = Preference.find_by(tag_id: tag.id, active: true) %>
            <form class="form-inline" >
              <%= link_to preference_deactivate_path(pref), { class: "btn-sm btn#{i} w-100 text-center inc-pref", method: "patch",  style: "text-decoration:none;" } do %>
                <span><%= tag.name %></span>
              <% end %>
            </form>

          <% else %>

            <form class="form-inline" >
              <%= link_to preference_tag_path(tag, kind: 1), { class: "btn-sm btn-outline#{i} w-100 text-center no-pref", method: "post",  style: "text-decoration:none; border:1px solid;"} do %>
                <span><%= tag.name %></span>
              <% end %>
            </form>

          <% end %>

        </div>

        <% end %>

    </div>
</body>
</html>
